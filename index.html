<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>My SMART App</title>
  <script src="https://cdn.jsdelivr.net/npm/fhirclient/build/fhir-client.js"></script>
</head>
<body>
  <h1>My SMART on FHIR App</h1>
  <div id="output">Loading patient info...</div>

  <script>
    FHIR.oauth2.ready().then(client => {
      return client.patient.read().then(patient => {
        const name = patient.name?.[0];
        const fullName = [name?.given?.join(" "), name?.family].join(" ");
        document.getElementById("output").innerText = `Hello, ${fullName}!`;
      });
    }).catch(error => {
      console.error(error);
      document.getElementById("output").innerText = `Error: ${error}`;
    });
  </script>
</body>
</html>
